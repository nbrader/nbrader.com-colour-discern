<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="ColourDiscerningTest.css">
    <title>Color Choice Game</title>
</head>
<body>
    <div id="instructions">
        <h2>Welcome to the Colour Discerning Test</h2>
        <p>
            In this exercise, you will be shown two colors labeled as "A" and "B". After pressing "Continue", one of the colors will be presented to you. Your task is to identify which label (either "A" or "B") corresponds to the color shown.
        </p>
        <label for="name">Your Name:</label>
        <input type="text" id="name" placeholder="Enter your name">

        <label for="deviationPercent">Deviation Percent:</label>
        <input type="number" id="deviationPercent" min="0" max="100" step="0.1" placeholder="Enter percentage (0-100)" value="50">
        
        <input type="file" id="csvUpload" accept=".csv">
        
        <button id="start">Start</button>
    </div>
    <div id="content" style="display: none;">
        <p id="memorizeInstruction">Memorize the colors below.</p>
        <div id="colors">
            <div class="color-box" id="a">
                <p>A</p>
                <div class="color"></div>
            </div>
            <div class="color-box" id="b">
                <p>B</p>
                <div class="color"></div>
            </div>
        </div>
        <button id="continue">Continue</button>
        <button id="showResults">Show Results</button>
    </div>

    <div id="choiceScreen" style="display: none;">
        <p id="choiceInstruction">Which color was this one?</p>
        <div class="color-box" id="testColor">
            <div class="color"></div>
        </div>
        <button id="chooseA">A</button>
        <button id="chooseB">B</button>
    </div>
    
    <div id="resultsCanvas" style="display: none; width: 100vw; height: 100vh;">
        <!-- 3D Visualization Controls and Canvas -->
        <div id="visualizer3D" style="width: 70%; height: 100%; float: left;">
            <label for="whiteLinesToggle">Show White Lines for Confused Colors:</label>
            <input type="checkbox" id="whiteLinesToggle" checked>

            <label for="darkBlueLinesToggle">Show Dark Blue Lines for Distinguished Colors:</label>
            <input type="checkbox" id="darkBlueLinesToggle" checked>
            
            <label for="lightPrevColsToggle">Show Previously Memorized Colors:</label>
            <input type="checkbox" id="lightPrevColsToggle" checked>
            
            <label for="greyOutlinesToggle">Highlight Previously Memorized Colours:</label>
            <input type="checkbox" id="greyOutlinesToggle">
            
            <label for="gridDotsToggle">Show 3D Grid of Colours:</label>
            <input type="checkbox" id="gridDotsToggle">
            
            <label for="gridToggle">Show Zero Planes:</label>
            <input type="checkbox" id="gridToggle" checked>

            <!-- Canvas for 3D visualization will be appended here by THREE.js -->
        </div>

        <!-- 2D Histogram Canvas -->
        <div id="histogram2D" style="width: 30%; height: 100%; float: left; background-color: #f6f6f6;">
            <h3 style="text-align: center;">Color Discrimination Histogram</h3>
            <!-- Canvas for 2D histogram will be appended here by THREE.js -->
        </div>

        <div style="clear: both;">
            <button id="download">Export CSV</button>
            <button id="backToResults">Back</button>
        </div>
    </div>
    
    <div id="waitingMessage" style="display: none; color: white; font-size: 24px;">
        Wait for <span id="countdown">8</span> seconds...
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r122/three.min.js"></script>
    <script src="https://threejsfundamentals.org/threejs/resources/threejs/r110/examples/js/controls/OrbitControls.js"></script>
    <script src="ColourDiscerningTest.js"></script>
</body>
</html>
